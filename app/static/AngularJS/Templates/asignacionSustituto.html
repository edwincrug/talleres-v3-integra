<link href="../../css/inspinia/sweetalert/sweetalert.css" rel="stylesheet">
<link rel="stylesheet" href="../../css/administracionOrden.css">

<div  class="animated fadeInRight" ng-init="init_asignacion()">
    <div class="headTitleTallerCita">
        <span class="title"> Asignación <span class="subtitle"></span></span>
    </div>
    <br>
    <div class="wrapper wrapper-content ibox-content">
          <div class="row col-md-5 pull-right" >

            <div class="form-group row">
                <label class="col-sm-3 control-label">Motivo: </label>
                <div class="col-sm-9">
                    <select class="form-control" name="motivo" ng-model="selectedMotivo" ng-options="motivo.Descripcion for motivo in motivos" ng-change="validaMotivo(selectedMotivo)">
                        <option value=''>Selecionar  motivo</option><!--default option -->
                    </select>
                </div>
            </div>

            <div class="form-group row" ng-show="show_orden==true">
                <label class="col-sm-3 control-label">Número de la Orden: </label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" value="" ng-model="numOrden" ng-change="validaOrden()">
                </div>
            </div>

            <div class="col-dm-6 pull-right row"  >
                <button type="button" class="btn btn-success" id="btnLigar" ng-click="addUnidadSusituto()" ng-disabled="validateSustituto()==false"><span class="glyphicon glyphicon-link"></span><strong> Ligar unidad con sustituto</strong></button>
            </div>
        </div>
        <div class="row">

        		<div class="col-md-7">
        			<form class="form-horizontal" >
                        <br/> 
                        <div class="title" >Unidad </div>
                         <br/> 
                        <div class="row">
                            <div class="form-group">
                                <div class="col-sm-12">

                                    

                                	<div class="col-sm-11">
                                		<input type="text" placeholder="Buscar unidad" ng-model="datoUnidad" ng-change="habilitaBuscar(datoUnidad)" class="form-control ng-pristine ng-untouched ng-valid" ng-enter="getUnidad(datoUnidad)">
                                	</div>

                                	
                                     <div class="col-sm-1">
                                    	 <button id="btnBuscar" busy="Buscando.." type="button" class="btn btn-primary" ng-click="getUnidad(datoUnidad)"><span class="glyphicon glyphicon-search"></span></button>
                                    </div>
                                </div>
                            </div>  
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover dataTableUnidad" cg-busy="{promise:promise,message:message}">
                                <thead>
                                    <tr>
                                        <th>Número Económico</th>
                                        <th>Número Económico Cliente</th>
                                        <th>Seleccionar</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="unidad in unidades ">
                                        <td>{{unidad.numEconomico}}</td>
                                        <td>{{unidad.clienteNumEconomico}}</td>
                                        <td>    
                                            <input type="radio" name="optUnidad" ng-click="selUnidad(unidad)" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            
                        </div>


                        
                        </br>
                        </br>
    
                    </form>
                    <form class="form-horizontal">
                        <br/> 
                        <div class=" title" >Sustituto </div>
                         <br/> 
                        <div class="row" >
                            <div class="form-group">
                                <div class="col-sm-12">

                                    <div class="col-sm-11">
                                        <input type="text" placeholder="Buscar sustituto"  ng-model="dataSustituto" class="form-control ng-pristine ng-untouched ng-valid" ng-enter="getSustituto(dataSustituto)" >
                                    </div>


                                     <div class="col-sm-1">
                                         <button id="btnSustituto" busy="Buscando.." type="button" class="btn btn-primary " ng-click="getSustituto(dataSustituto)"><span class="glyphicon glyphicon-search"></span></button>
                                    </div>
                                </div>
                            </div>  
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover dataTableSustituto" cg-busy="{promise:promise,message:message}">
                                <thead>
                                    <tr>
                                        <th>Número Económico</th>
                                        <th>Número Económico Cliente</th>
                                        <th>Seleccionar</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="sustituto in sustitutos ">
                                        <td>{{sustituto.numEconomico}}</td>
                                        <td>{{sustituto.clienteNumEconomico}}</td>
                                        <td>    
                                            <input type="radio" name="optUnidad"  ng-click="selsustituto(sustituto)" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                    

                        </br>
                        </br>

                        
                    </form>
        		</div>
                <div class="col-md-5 row" id="mapaSutituto">

                     <form class="form-horizontal" >
                        <div class="map_container" ng-show="show_mapSustituto==true">
                            <div ng-if="bandera == 0">
                            <google-map center="map.center" zoom="map.zoom" draggable="true" shadow="map.shadow" icon="map.icon" options="map.options" control="map.control">
                                <markers models="map.markers" coords="'self'" options="'options'" isLabel='true'>
                                </markers>
                            </google-map>
                            </div>
                                <div ng-if="bandera == 1">
                                <div class="alert alert-warning" role="alert">
                                <br>
                                  <h4 class="alert-heading">Advertencia!</h4>
                                  <br>
                                  <p class="mb-0">No se encontro la ubicación de la unidad</p>
                                  <br>
                                </div>
                                </div>
                        </div>
                    </form>

                    
                    
                    
                </div>

                
                
        </div>
                        

     </div>

  
      

</div>  